{"id":"HYZJ","dependencies":[{"name":"/Users/danilo/Sites/sockets/sl-magnifier/package.json","includedInParent":true,"mtime":1587158443743},{"name":"react","loc":{"line":1,"column":18},"parent":"/Users/danilo/Sites/sockets/sl-magnifier/src/App/App.js","resolved":"/Users/danilo/Sites/sockets/sl-magnifier/node_modules/react/index.js"},{"name":"../Game/Game","loc":{"line":3,"column":17},"parent":"/Users/danilo/Sites/sockets/sl-magnifier/src/App/App.js","resolved":"/Users/danilo/Sites/sockets/sl-magnifier/src/Game/Game.js"},{"name":"../UI/UI","loc":{"line":4,"column":15},"parent":"/Users/danilo/Sites/sockets/sl-magnifier/src/App/App.js","resolved":"/Users/danilo/Sites/sockets/sl-magnifier/src/UI/UI.js"},{"name":"../UI/Loader","loc":{"line":5,"column":19},"parent":"/Users/danilo/Sites/sockets/sl-magnifier/src/App/App.js","resolved":"/Users/danilo/Sites/sockets/sl-magnifier/src/UI/Loader.js"},{"name":"../../assets/sing.mp3","loc":{"line":7,"column":22},"parent":"/Users/danilo/Sites/sockets/sl-magnifier/src/App/App.js","resolved":"/Users/danilo/Sites/sockets/sl-magnifier/assets/sing.mp3"},{"name":"./App.scss","loc":{"line":9,"column":7},"parent":"/Users/danilo/Sites/sockets/sl-magnifier/src/App/App.js","resolved":"/Users/danilo/Sites/sockets/sl-magnifier/src/App/App.scss"},{"name":"../api","loc":{"line":11,"column":86},"parent":"/Users/danilo/Sites/sockets/sl-magnifier/src/App/App.js","resolved":"/Users/danilo/Sites/sockets/sl-magnifier/src/api.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var e=o(require(\"react\")),t=o(require(\"../Game/Game\")),n=o(require(\"../UI/UI\")),r=o(require(\"../UI/Loader\")),a=o(require(\"../../assets/sing.mp3\"));require(\"./App.scss\");var s=require(\"../api\");function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function y(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){return function(){var t,n=g(e);if(S()){var r=g(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return b(this,t)}}function b(e,t){return!t||\"object\"!==i(t)&&\"function\"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function S(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=1,k=function(o){y(c,e.default.Component);var i=m(c);function c(t){var n;return f(this,c),(n=i.call(this,t)).handleClick=n.handleClick.bind(v(n)),n.startGame=n.startGame.bind(v(n)),n.handleSocketResponse=n.handleSocketResponse.bind(v(n)),n.hideUI=n.hideUI.bind(v(n)),n.playSound=n.playSound.bind(v(n)),n.state={value:0,clicks:0,players:[],endGame:!1},(0,s.socketOnConnect)(n.handleSocketResponse),n.game=e.default.createRef(),n}return d(c,[{key:\"handleSocketResponse\",value:function(e){switch(e.type){case\"update-egg\":this.setState(u({},this.state,{},e.data));break;case\"update-players\":this.setState(u({},this.state,{players:e.data}));break;case\"end-game\":this.runEndGame(e.data);break;case\"winner\":this.setState(u({},this.state,{winner:e.data}))}\"update-players\"!=e.type||this.state.player||this.tryReconnect()}},{key:\"handleClick\",value:function(e){var t=this.state.player.clicks;t++,this.setState(u({},this.state,{player:u({},this.state.player,{clicks:t})})),(0,s.socketOnEggClick)(O)}},{key:\"startGame\",value:function(e){this.setState({player:e}),(0,s.socketOnStartGame)(e)}},{key:\"hideUI\",value:function(){this.setState({start:!0})}},{key:\"runEndGame\",value:function(e){this.setState(u({},this.state,{endGame:!0})),(0,s.socketOnEndGame)(this.state.player),this.game.current.runEndGame()}},{key:\"tryReconnect\",value:function(){var e=JSON.parse(window.localStorage.getItem(\"sl-magnifier\"));this.state.players.filter(function(t){return console.log(\"p\",t),t.name==e.name})[0]?(this.setState({start:!0}),this.startGame(e)):window.localStorage.clear()}},{key:\"playSound\",value:function(){var e=this,t=createjs.Sound.play(\"sing\");t.volume=1,this.setState({sound:!1,music:t});var n=new SplitText(\".loading h1\",{type:\"chars\"});gsap.to(n.chars,{duration:.6,y:\"100vh\",ease:Back.easeIn,stagger:.1,onComplete:function(t){e.setState({start:!1})}})}},{key:\"componentDidMount\",value:function(){var e=this;createjs.Sound.alternateExtensions=[\"mp3\"],createjs.Sound.on(\"fileload\",function(t){e.setState({sound:!0})},this),createjs.Sound.registerSound(a.default,\"sing\")}},{key:\"render\",value:function(){return console.log(this.state.player),e.default.createElement(\"div\",{className:\"app\"},e.default.createElement(\"div\",{className:\"grad\"}),e.default.createElement(t.default,{winner:this.state.winner,music:this.state.music,onClick:this.handleClick,progress:100*this.state.value,players:this.state.players,player:this.state.player,endGame:this.state.endGame,ref:this.game}),void 0===this.state.start&&e.default.createElement(r.default,{sound:this.state.sound,playSound:this.playSound}),!1===this.state.start&&e.default.createElement(n.default,{startGame:this.startGame,players:this.state.players,hideUI:this.hideUI}))}}]),c}(),w=k;exports.default=w;"},"sourceMaps":null,"error":null,"hash":"b7df5433ade4022c0d4ecadfe680318d","cacheData":{"env":{}}}