{"id":"HYZJ","dependencies":[{"name":"/Users/danilo/Sites/sockets/sl-magnifier/package.json","includedInParent":true,"mtime":1586706857615},{"name":"react","loc":{"line":1,"column":18},"parent":"/Users/danilo/Sites/sockets/sl-magnifier/src/App/App.js","resolved":"/Users/danilo/Sites/sockets/sl-magnifier/node_modules/react/index.js"},{"name":"../Game/Game","loc":{"line":3,"column":17},"parent":"/Users/danilo/Sites/sockets/sl-magnifier/src/App/App.js","resolved":"/Users/danilo/Sites/sockets/sl-magnifier/src/Game/Game.js"},{"name":"../UI/UI","loc":{"line":4,"column":15},"parent":"/Users/danilo/Sites/sockets/sl-magnifier/src/App/App.js","resolved":"/Users/danilo/Sites/sockets/sl-magnifier/src/UI/UI.js"},{"name":"../../assets/sing.mp3","loc":{"line":6,"column":22},"parent":"/Users/danilo/Sites/sockets/sl-magnifier/src/App/App.js","resolved":"/Users/danilo/Sites/sockets/sl-magnifier/assets/sing.mp3"},{"name":"./App.scss","loc":{"line":8,"column":7},"parent":"/Users/danilo/Sites/sockets/sl-magnifier/src/App/App.js","resolved":"/Users/danilo/Sites/sockets/sl-magnifier/src/App/App.scss"},{"name":"../api","loc":{"line":10,"column":86},"parent":"/Users/danilo/Sites/sockets/sl-magnifier/src/App/App.js","resolved":"/Users/danilo/Sites/sockets/sl-magnifier/src/api.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var e=o(require(\"react\")),t=o(require(\"../Game/Game\")),n=o(require(\"../UI/UI\")),r=o(require(\"../../assets/sing.mp3\"));require(\"./App.scss\");var a=require(\"../api\");function o(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e})(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function d(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return function(){var t,n=v(e);if(g()){var r=v(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return m(this,t)}}function m(e,t){return!t||\"object\"!==s(t)&&\"function\"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function g(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=10,O=function(o){d(i,e.default.Component);var s=h(i);function i(t){var n;return u(this,i),(n=s.call(this,t)).handleClick=n.handleClick.bind(b(n)),n.startGame=n.startGame.bind(b(n)),n.handleSocketResponse=n.handleSocketResponse.bind(b(n)),n.hideUI=n.hideUI.bind(b(n)),n.playSound=n.playSound.bind(b(n)),n.state={value:0,clicks:0,players:[],endGame:!1},(0,a.socketOnConnect)(n.handleSocketResponse),n.game=e.default.createRef(),n}return f(i,[{key:\"handleSocketResponse\",value:function(e){switch(console.log(\"handleSocketResponse\",e.type),e.type){case\"update-egg\":this.setState(c({},this.state,{},e.data));break;case\"update-players\":this.setState(c({},this.state,{players:e.data}));break;case\"end-game\":this.runEndGame(e.data)}\"update-players\"!=e.type||this.state.player||(console.log(\"is plaer ready???\",this.state.player),this.tryReconnect()),this.state.sound&&console.log(\"play sound !!\")}},{key:\"handleClick\",value:function(e){var t=this.state.player.clicks;t++,this.setState(c({},this.state,{player:c({},this.state.player,{clicks:t})})),(0,a.socketOnEggClick)(S)}},{key:\"startGame\",value:function(e){console.log(\"START GAME\"),this.setState({player:e}),(0,a.socketOnStartGame)(e)}},{key:\"hideUI\",value:function(){this.setState({start:!0})}},{key:\"runEndGame\",value:function(e){this.setState(c({},this.state,{endGame:!0})),(0,a.socketOnEndGame)(this.state.player),this.game.current.runEndGame()}},{key:\"tryReconnect\",value:function(){console.log(\"try reconnect\");var e=JSON.parse(window.localStorage.getItem(\"sl-magnifier\"));this.state.players.filter(function(t){return console.log(\"p\",t),t.name==e.name})[0]?(this.setState({start:!0}),this.startGame(e)):(console.log(\"no player match in mage\"),window.localStorage.clear())}},{key:\"playSound\",value:function(){var e=this;createjs.Sound.play(\"sing\").volume=1,this.setState({sound:!1});var t=new SplitText(\".loading h1\",{type:\"chars\"});gsap.to(t.chars,{duration:.6,y:\"100vh\",ease:Back.easeIn,stagger:.1,onComplete:function(t){e.setState({start:!1})}})}},{key:\"componentDidMount\",value:function(){var e=this;createjs.Sound.alternateExtensions=[\"mp3\"],createjs.Sound.on(\"fileload\",function(t){e.setState({sound:!0})},this),createjs.Sound.registerSound(r.default,\"sing\")}},{key:\"render\",value:function(){return console.log(this.state.player),e.default.createElement(\"div\",{className:\"app\"},e.default.createElement(\"div\",{className:\"grad\"}),e.default.createElement(t.default,{onClick:this.handleClick,progress:100*this.state.value,players:this.state.players,player:this.state.player,endGame:this.state.endGame,ref:this.game}),void 0===this.state.start&&e.default.createElement(\"div\",{className:\"loading\"},e.default.createElement(\"h1\",null,\"Is your sound on?\"),this.state.sound&&e.default.createElement(\"p\",{onClick:this.playSound},\"Yes!\")),!1===this.state.start&&e.default.createElement(n.default,{startGame:this.startGame,players:this.state.players,hideUI:this.hideUI}))}}]),i}(),k=O;exports.default=k;"},"sourceMaps":null,"error":null,"hash":"2ce06ef6f6d646d561076bd878ff1d4a","cacheData":{"env":{}}}